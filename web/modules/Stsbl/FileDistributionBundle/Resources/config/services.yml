# src/Stsbl/FileDistributionBundle/Resources/config/services.yml
services:
    _defaults:
        autowire: true
        autoconfigure: true

    stsbl.filedistribution.crud.file_distribution:
        class: Stsbl\FileDistributionBundle\Crud\FileDistributionCrud
        arguments: [Stsbl\FileDistributionBundle\Entity\Host]
        calls:
            - [ setContainer, ["@service_container"]]
        tags:
            - { name: iserv.crud }
            
    stsbl.filedistribution.admin.rooms:
        class: Stsbl\FileDistributionBundle\Admin\IncludeRoomAdmin
        arguments: [Stsbl\FileDistributionBundle\Entity\FileDistributionRoom]
        calls:
            - [ setLogger, ["@iserv.logger"]]
        tags:
            - { name: iserv.crud }
            
    stsbl.filedistribution.menu:
        class: Stsbl\FileDistributionBundle\EventListener\MenuListener # Out MenuListener Class
        tags:
          - { name: kernel.event_listener, event: iserv_portal.menu_main, method: onBuildMainMenu } # Tells IServ about the main menu method
          - { name: kernel.event_listener, event: iserv_portal.menu_admin, method: onBuildAdminMenu } # Tells IServ about the admin menu method
    
    stsbl.filedistribution.manager:
        parent: Stsbl\FileDistributionBundle\Service\FileDistributionManager
        deprecated: 'The service id "%service_id%" is deprecated, switch to "Stsbl\FileDistributionBundle\Service\FileDistributionManager" via dependency injection instead.'
        autowire: true
        autoconfigure: false

    Stsbl\FileDistributionBundle\Service\FileDistributionManager: ~

    stsbl.filedistribution.twig.extension.base64:
        class: Stsbl\FileDistributionBundle\Twig\Extension\Base64
        tags :
          - { name: twig.extension }