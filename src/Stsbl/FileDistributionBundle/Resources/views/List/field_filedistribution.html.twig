{# src/Stsbl/FileDistributionBundle/Resources/views/List/field_filedistribution.html.twig #}
{% extends admin.getTemplate('list_field_base') %}

{% block field %}
    {% set fd = admin.getFileDistribution(object) %}
    
    {% if fd is not null %}
        <span title="{{ __('By: %s', fd.user) }}"><strong>{{ fd.plainTitle }}</strong></span>
        {% if fd.user == app.user %}
            {% set path = 'Files/File-Distribution/' ~ fd.plainTitle %}
            &nbsp;<a href="{{ path('file_list', {'path': path|base64_encode}) }}" title="{{ _('Open folder of this file distribution')  }}">{{ icon('legacy-folder') }}</a>
        {% endif %}

        {% if fd.isolation == true %}
            &nbsp;<span title="{{ _('Host isolation activated') }}">{{ icon('fugue-arrow-stop') }}</span>
        {% endif %}

        {%  if fd.folderAvailability == 'readonly' %}
            &nbsp;<span title="{{ _('Group folders and other Windows shares are only available for read only.') }}">{{ icon('fugue-lock--pencil') }}</span>
        {%  elseif fd.folderAvailability == 'replace' %}
            &nbsp;<span title="{{ _('Group folders and other Windows shares are replaced with empty folders.') }}">{{  icon('fugue-disk--minus') }}</span>
        {%  endif %}
    {% endif %}
{% endblock %}

{% block value %}
    {% set fd = admin.getFileDistribution(object) %}

    {%  spaceless %}
        {# prefix file distributions with aaaa_ and all other hosts with zzzz_ to move file distributions to top #}
        {% if fd is not null %}
            aaaa{{ fd.plainTitle }}
        {% else %}
            zzzz
        {% endif %}
    {%  endspaceless %}
{% endblock %}